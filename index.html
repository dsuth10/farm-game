<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sheep Station Manager - Educational Math Game</title>
    <meta name="description" content="An educational web application for Year 5 students to practice multiplication, unit rates, and profit-loss analysis through sheep farming simulation.">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <!-- Header Section -->
    <header class="game-header">
        <h1>Sheep Station Manager</h1>
        <div class="round-info">
            <span class="round-counter">Round <span id="currentRound">1</span> of <span id="maxRounds">4</span></span>
        </div>
        <div class="season-info">
            <span class="season-name" id="currentSeason">Spring</span>
            <span class="season-icon" id="seasonIcon">üå∏</span>
        </div>
    </header>

    <!-- Main Game Container -->
    <main class="game-container">
        <!-- Purchase Section -->
        <section class="purchase-section">
            <div class="section-header">
                <h2>Purchase Sheep</h2>
                <button class="help-icon" title="Sheep Purchase System Help" onclick="window.sheepGame.showSheepPurchaseHelp()">‚ùì</button>
            </div>
            
            <!-- Persistent Skip Option Box -->
            <div class="skip-option-box">
                <div class="info-box">
                    <h4>üí° Skip Purchase Option</h4>
                    <p>You can skip purchasing new sheep and housing after round one.</p>
                </div>
            </div>
            
            <div class="purchase-controls">
                <label for="sheepMoneyInput" title="Enter the amount of money you want to spend on sheep. The number of sheep will be calculated based on current seasonal prices.">Amount to spend on sheep ($):</label>
                <input type="number" id="sheepMoneyInput" min="0" step="1" value="0" placeholder="Enter amount" title="Enter the amount of money you want to spend on sheep">
                <button id="purchaseBtn" class="btn btn-primary" title="Purchase sheep with the entered amount">Purchase Sheep</button>
            </div>
            <div class="sheep-info">
                <div class="sheep-cost-info">
                    <span class="sheep-cost-label">Cost per sheep:</span>
                    <span class="sheep-cost-value" id="sheepCostPerUnit">$45</span>
                </div>
                <div class="sheep-units-preview">
                    <span class="sheep-units-label">Sheep to purchase:</span>
                    <span class="sheep-units-value" id="sheepUnitsPreview">0</span>
                </div>
                <div class="sheep-round-purchases" id="sheepRoundPurchases" role="status" aria-live="polite">
                    <span class="round-purchases-label">This round:</span>
                    <span class="round-purchases-value" id="sheepRoundPurchasesValue">No sheep purchased yet</span>
                </div>
            </div>
            
            <!-- Housing Purchase Section -->
            <div class="housing-purchase-section">
                <div class="section-header">
                    <h3>Purchase Housing</h3>
                    <button class="help-icon" title="Housing System Help" onclick="window.sheepGame.showHousingHelp()">‚ùì</button>
                </div>
                <div class="housing-controls">
                    <label for="housingAmount" title="Enter the amount of money you want to spend on housing. The number of housing units will be calculated based on current seasonal prices.">Amount to spend on housing ($):</label>
                    <input type="number" id="housingAmount" min="0" step="1" value="0" placeholder="Enter amount" title="Enter the amount of money you want to spend on housing">
                    <button id="purchaseHousingBtn" class="btn btn-secondary" title="Purchase housing units with the entered amount">Purchase Housing</button>
                </div>
                <div class="housing-info">
                    <div class="housing-cost-info">
                        <span class="housing-cost-label">Cost per housing unit:</span>
                        <span class="housing-cost-value" id="housingCostPerUnit">$8</span>
                    </div>
                    <div class="housing-units-preview">
                        <span class="housing-units-label">Housing units to purchase:</span>
                        <span class="housing-units-value" id="housingUnitsPreview">0</span>
                    </div>
                    <div class="housing-round-purchases" id="housingRoundPurchases" role="status" aria-live="polite">
                        <span class="round-purchases-label">This round:</span>
                        <span class="round-purchases-value" id="housingRoundPurchasesValue">No housing purchased yet</span>
                    </div>
                </div>
            </div>
            
            <div class="price-display">
                <h3>Current Prices</h3>
                <div class="price-grid">
                    <div class="price-item">
                        <span class="price-label">Sheep Purchase Price:</span>
                        <span class="price-value" id="sheepPrice">$45</span>
                        <span class="price-change" id="sheepPriceChange"></span>
                    </div>
                    <div class="price-item">
                        <span class="price-label">Housing Cost:</span>
                        <span class="price-value" id="housingCost">$8</span>
                        <span class="price-change" id="housingCostChange"></span>
                    </div>
                    <div class="price-item">
                        <span class="price-label">Feed Cost:</span>
                        <span class="price-value" id="feedCost">$12</span>
                        <span class="price-change" id="feedCostChange"></span>
                    </div>
                    <div class="price-item">
                        <span class="price-label">Wool Price:</span>
                        <span class="price-value" id="woolPrice">$18</span>
                        <span class="price-change" id="woolPriceChange"></span>
                    </div>
                </div>
            </div>

            <button id="marketTrendsBtn" class="btn btn-secondary">Market Trends</button>
            <button id="roundHistoryBtn" class="btn btn-secondary" onclick="window.sheepGame.showRoundHistory()">Round History</button>
        </section>

        <!-- Financial Ledger Section -->
        <section class="ledger-section">
            <h2>Financial Ledger</h2>
            <div class="balance-display">
                <span class="balance-label">Current Balance:</span>
                <span class="balance-amount" id="currentBalance">$200</span>
            </div>
            
            <div class="flock-info">
                <span class="flock-label">Flock Size:</span>
                <span class="flock-count" id="flockSize">0</span>
            </div>
            
            <div class="housing-info-display">
                <span class="housing-label">Housing Capacity:</span>
                <span class="housing-capacity" id="housingCapacity">0</span>
                <span class="housing-status" id="housingStatus"></span>
            </div>
            
            <div class="housing-expenses-display">
                <span class="expenses-label">Housing Expenses:</span>
                <span class="expenses-amount" id="housingExpenses">$0</span>
                <span class="expenses-detail" id="housingExpensesDetail">(0 units purchased)</span>
            </div>

            <div class="calculations-section">
                <h3>Your Calculations</h3>
                
                <!-- Feed Cost Calculation with Guide -->
                <div class="calculation-item">
                    <div class="calculation-guide" id="feedGuide">
                        <button class="guide-toggle" aria-expanded="false" aria-controls="feedGuideContent">
                            <span class="guide-icon">üìñ</span>
                            <span class="guide-text">Show Help: How to calculate Feed Cost</span>
                        </button>
                        <div class="guide-content" id="feedGuideContent" aria-hidden="true">
                            <div class="guide-steps">
                                <h4>Feed Cost Calculation Guide</h4>
                                <p><strong>What to do:</strong> Multiply the number of sheep by the cost of each unit of food</p>
                                <div class="guide-example">
                                    <p><strong>Step 1:</strong> Count how many sheep you have</p>
                                    <p><strong>Step 2:</strong> Look at the current feed cost per sheep (shown in the prices above)</p>
                                    <p><strong>Step 3:</strong> Multiply: Number of sheep √ó Feed cost per sheep</p>
                                </div>
                                <p class="guide-tip">üí° <strong>Tip:</strong> Feed costs change with seasons. Check the current prices above!</p>
                            </div>
                        </div>
                    </div>
                    <label for="feedCalculation">Feed Cost Calculation:</label>
                    <input type="number" id="feedCalculation" placeholder="Enter your answer">
                    <button class="btn btn-check" data-calculation="feed">Check</button>
                </div>

                <!-- Wool Income Calculation with Guide -->
                <div class="calculation-item">
                    <div class="calculation-guide" id="woolGuide">
                        <button class="guide-toggle" aria-expanded="false" aria-controls="woolGuideContent">
                            <span class="guide-icon">üìñ</span>
                            <span class="guide-text">Show Help: How to calculate Wool Income</span>
                        </button>
                        <div class="guide-content" id="woolGuideContent" aria-hidden="true">
                            <div class="guide-steps">
                                <h4>Wool Income Calculation Guide</h4>
                                <p><strong>What to do:</strong> Multiply the number of sheep by the income from wool per sheep</p>
                                <div class="guide-example">
                                    <p><strong>Step 1:</strong> Count how many sheep you have</p>
                                    <p><strong>Step 2:</strong> Look at the current wool price per sheep (shown in the prices above)</p>
                                    <p><strong>Step 3:</strong> Multiply: Number of sheep √ó Wool price per sheep</p>
                                </div>
                                <p class="guide-tip">üí° <strong>Tip:</strong> This is your income! Wool prices change with seasons, so check current prices.</p>
                            </div>
                        </div>
                    </div>
                    <label for="woolCalculation">Wool Income Calculation:</label>
                    <input type="number" id="woolCalculation" placeholder="Enter your answer">
                    <button class="btn btn-check" data-calculation="wool">Check</button>
                </div>

                <!-- Profit Calculation with Guide -->
                <div class="calculation-item">
                    <div class="calculation-guide" id="profitGuide">
                        <button class="guide-toggle" aria-expanded="false" aria-controls="profitGuideContent">
                            <span class="guide-icon">üìñ</span>
                            <span class="guide-text">Show Help: How to calculate Profit/Loss</span>
                        </button>
                        <div class="guide-content" id="profitGuideContent" aria-hidden="true">
                            <div class="guide-steps">
                                <h4>Profit/Loss Calculation Guide</h4>
                                <p><strong>What to do:</strong> Subtract your total costs from your wool income</p>
                                <p><em>Note: Purchase Cost and Housing Cost are only included if you bought new sheep or housing this round.</em></p>
                                <div class="guide-example">
                                    <p><strong>Step 1:</strong> Calculate your wool income (from the wool income calculation above)</p>
                                    <p><strong>Step 2:</strong> Calculate your feed cost (from the feed cost calculation above)</p>
                                    <p><strong>Step 3:</strong> Add any purchase costs (if you bought new sheep this round)</p>
                                    <p><strong>Step 4:</strong> Add any housing costs (if you bought new housing this round)</p>
                                    <p><strong>Step 5:</strong> Add all your costs together</p>
                                    <p><strong>Step 6:</strong> Subtract your total costs from your wool income</p>
                                </div>
                                <p class="guide-tip">üí° <strong>Tip:</strong> Positive numbers mean profit, negative numbers mean loss. This shows if you're making money!</p>
                            </div>
                        </div>
                    </div>
                    <label for="profitCalculation">Profit/Loss Calculation:</label>
                    <input type="number" id="profitCalculation" placeholder="Enter your answer">
                    <button class="btn btn-check" data-calculation="profit">Check</button>
                </div>
            </div>

            <div class="profit-chart">
                <h3>Profit Trend</h3>
                <div id="profitChart" class="chart-container">
                    <!-- Chart will be rendered here -->
                </div>
            </div>
        </section>

        <!-- Market Conditions Section -->
        <section class="market-conditions">
            <h3>Market Conditions</h3>
            <p id="marketCondition">Growing season - Prices are favorable for expansion</p>
            <div id="priceChanges" class="price-changes">
                <!-- Price change indicators will be displayed here -->
            </div>
        </section>

        <!-- Feedback Banner -->
        <section class="feedback-banner" id="feedbackBanner">
            <!-- Dynamic feedback messages will appear here -->
        </section>

        <!-- Game Controls -->
        <section class="game-controls">
            <button id="nextRoundBtn" class="btn btn-primary" disabled>Next Round</button>
            <button id="resetBtn" class="btn btn-secondary">Reset Game</button>
            <button id="helpBtn" class="btn btn-secondary">Help</button>
            <button id="teacherSettingsBtn" class="btn btn-secondary">Teacher Settings</button>
        </section>
    </main>

    <!-- Teacher Settings Modal -->
    <div id="teacherSettingsModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Teacher Settings</h2>
            <div class="settings-grid">
                <div class="setting-item">
                    <label for="seasonalFluctuation">Seasonal Price Fluctuations:</label>
                    <input type="checkbox" id="seasonalFluctuation" checked>
                </div>
                <div class="setting-item">
                    <label for="randomVariation">Random Price Variations (¬±$3):</label>
                    <input type="checkbox" id="randomVariation">
                </div>
                <div class="setting-item">
                    <label for="sheepMortality">Sheep Mortality Events (5% chance):</label>
                    <input type="checkbox" id="sheepMortality">
                </div>
                <div class="setting-item">
                    <label for="startingBalance">Starting Balance:</label>
                    <input type="number" id="startingBalance" value="200" min="50" max="500">
                </div>
                <div class="setting-item">
                    <label for="maxRoundsSetting">Maximum Rounds:</label>
                    <input type="number" id="maxRoundsSetting" value="4" min="2" max="8">
                </div>
                <div class="setting-item">
                    <label for="marketDifficulty">Market Difficulty:</label>
                    <select id="marketDifficulty">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button id="saveSettings" class="btn btn-primary">Save Settings</button>
                <button id="cancelSettings" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>How to Play</h2>
            <div class="help-content">
                <h3>Game Overview</h3>
                <p>Welcome to Sheep Station Manager! You're a sheep farmer managing your flock through four seasons.</p>
                
                <h3>How to Play</h3>
                <ol>
                    <li><strong>Purchase Sheep:</strong> Choose how many sheep to buy (0-20) in the first round</li>
                    <li><strong>Purchase Housing:</strong> Buy housing units for your sheep (1 unit per sheep)</li>
                    <li><strong>Calculate Costs:</strong> Work out housing and feed costs</li>
                    <li><strong>Calculate Income:</strong> Determine wool income from your sheep</li>
                    <li><strong>Calculate Profit:</strong> Find your net profit or loss</li>
                    <li><strong>Advance:</strong> Move to the next round when all calculations are correct</li>
                </ol>

                <h3>Skip Purchase Feature (Rounds 2+)</h3>
                <p>In rounds 2 and beyond, you can choose to skip purchasing new sheep and housing. This allows you to:</p>
                <ul>
                    <li>Use your existing flock for calculations</li>
                    <li>Focus only on feed costs and wool income</li>
                    <li>Save money for future rounds</li>
                    <li>Still maintain the housing requirement if you want to expand later</li>
                </ul>

                <h3>Seasonal Changes</h3>
                <p>Prices change each season based on market conditions. Watch for the ‚Üë‚Üì indicators showing price changes.</p>

                <h3>Getting Help</h3>
                <p>If you get stuck, the game will provide hints and worked examples to help you learn.</p>
            </div>
        </div>
    </div>

    <!-- Market Trends Modal -->
    <div id="marketTrendsModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Market Trends</h2>
            <div id="marketTrendsContent">
                <!-- Market trends data will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Worked Example Modal -->
    <div id="workedExampleModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Worked Example</h2>
            <div id="workedExampleContent">
                <!-- Worked examples will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Housing Help Modal -->
    <div id="housingHelpModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="housingHelpContent">
                <!-- Housing help content will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Sheep Purchase Help Modal -->
    <div id="sheepPurchaseHelpModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="sheepPurchaseHelpContent">
                <!-- Sheep purchase help content will be displayed here -->
            </div>
        </div>
    </div>

    <!-- Game Summary Modal -->
    <div id="gameSummaryModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Game Summary</h2>
            <div id="gameSummaryContent">
                <!-- Game summary will be displayed here -->
            </div>
            <div class="modal-actions">
                <button id="downloadReport" class="btn btn-primary">Download Report</button>
                <button id="newGame" class="btn btn-secondary">New Game</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="js/game.js"></script>
    <script src="js/calculations.js"></script>
    <script src="js/validation.js"></script>
    <script src="js/pdf-export.js"></script>
</body>
</html> 